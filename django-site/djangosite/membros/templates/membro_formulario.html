{% extends "layouts/base.html" %}

{% block titulopagina %}
{{pagina_titulo}} | CACo
{% endblock %}

{% block extrahead %}
<script src='https://www.google.com/recaptcha/api.js?render={{captcha_site_key}}'></script>
{% endblock %}

{% block body %}

{# Colocamos o conteúdo da página estática se houver #}
{% if pagina %}
<div class="row">
  <div class="col">
    {{pagina.conteudo|safe}}
  </div>
</div>
{% endif %}

{# Colocamos as mensagens, se houver #}
{% if messages %}
{% for message in messages %}
  <div class="row">
    <div class="col">
        <div class="shadow-sm rounded alert {% if message.extra_tags %} alert-{{message.extra_tags}}{% endif %}">
          <h6 class="m-2 alert-link">{{message}}</h6>
        </div>
    </div>
  </div>
{% endfor %}
{% endif %}

<div class="row">
  <h2>{{formulario_titulo}}</h2>
  <hr>
</div>

<div class="row">
  <p>Itens marcados com <b>*</b> são obrigatórios.</p>
</div>

<div class="row">
  <div class="col">
    <form method="post" autocomplete="off">
      {% csrf_token %}
      <table class="table table-borderless">
        {{ form.as_table }}
      </table>

      <input name="g-recaptcha-response" id="g-recaptcha-response" type="hidden">

      <script>
      grecaptcha.ready(function() {
        grecaptcha.execute('{{captcha_site_key}}', {action: 'social'}).then(function(token) {
          document.getElementById('g-recaptcha-response').value=token;
        });
      });
      </script>

      <button type="submit" class="btn btn-primary">Enviar!</button>
    </form>
  </div>
</div>

{% endblock %}
